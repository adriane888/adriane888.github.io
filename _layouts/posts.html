---
---
{% comment %}
Custom posts index layout for minima.
- Shows top 3 most recent posts as featured cards
- Lists remaining posts below
- Displays category links on page
{% endcomment %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Posts | {{ site.title | escape }}</title>
    {% include head.html %}
    <style>
      .featured-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1rem;margin:1rem 0 2rem}
      .card{border:1px solid #363535;border-radius:8px;padding:1rem;background:#fff}
      .card h3{margin:0 0 .5rem;font-size:1.2rem}
      .post-list li{margin:0 0 .75rem}
      .category-links{margin:2rem 0;padding:.75rem 1rem;background:#f8f8f8;border-radius:8px}
      .category-links a{margin-right:.75rem}
    </style>
  </head>
  <body>
    <header class="site-header" role="banner">
      <div class="wrapper">
        <a class="site-title" rel="author" href="{{ '/' | relative_url }}">{{ site.title }}</a>
        <nav class="site-nav" role="navigation">
          <span class="nav-trigger" aria-label="Menu">â˜°</span>
          <div class="trigger">
            {% assign current = page.url %}
            {% for page_path in site.header_pages %}
              {% assign p = site.pages | where: "path", page_path | first %}
              {% if p %}
                <a class="page-link{% if current == p.url %} active{% endif %}" href="{{ p.url | relative_url }}">{{ p.title }}</a>
              {% endif %}
            {% endfor %}
          </div>
        </nav>
      </div>
    </header>
    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <h1>Posts</h1>

        {% assign posts_sorted = site.posts | sort: 'date' | reverse %}

        <div class="featured-grid">
          {% for post in posts_sorted limit:3 %}
            <div class="card">
              <span class="post-meta">{{ post.date | date: "%b %-d, %Y" }}</span>
              <h3><a class="post-link" href="{{ post.url | relative_url }}">{{ post.title }}</a></h3>
              {% if post.excerpt %}
                <p>{{ post.excerpt | strip_html | truncate: 160 }}</p>
              {% endif %}
              {% if post.categories and post.categories.size > 0 %}
                <p>
                  {% for c in post.categories %}
                    <a href="/categories/{{ c | downcase | replace: ' ', '-' }}/">{{ c }}</a>{% unless forloop.last %}, {% endunless %}
                  {% endfor %}
                </p>
              {% endif %}
            </div>
          {% endfor %}
        </div>

        <h2>All posts</h2>
        <ul class="post-list">
          {% for post in posts_sorted offset:3 %}
            <li>
              <span class="post-meta">{{ post.date | date: "%b %-d, %Y" }}</span>
              <h3><a class="post-link" href="{{ post.url | relative_url }}">{{ post.title }}</a></h3>
            </li>
          {% endfor %}
        </ul>

        <div class="category-links">
          <strong>Browse by category:</strong>
          <a href="/categories/ai/">AI</a>
          <a href="/categories/cloud/">Cloud</a>
          <a href="/categories/scripting/">Scripting</a>
          <a href="/categories/administration/">Administration</a>
          <a href="/categories/cicd/">CI/CD</a>
          <a href="/categories/devops-practices/">DevOps Practices</a>
        </div>

        <p>subscribe <a href="{{ "/feed.xml" | relative_url }}">via RSS</a></p>
      </div>
    </main>
    {% include footer.html %}
  </body>
</html>